<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Banco de Dados - TCU Oracle APEX</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.7;
            color: #333;
            background: #f5f5f5;
        }
        
        /* Painel de Progresso Flutuante */
        .progress-toggle {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1000;
        }
        .progress-btn {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 15px 20px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1rem;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .progress-btn:hover { background: #c0392b; }
        .progress-panel {
            position: absolute;
            bottom: 60px;
            right: 0;
            background: white;
            border-radius: 10px;
            padding: 20px;
            width: 300px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            display: none;
            max-height: 70vh;
            overflow-y: auto;
        }
        .progress-panel.open { display: block; }
        .progress-panel h4 {
            color: #e74c3c;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        .progress-panel label {
            display: flex;
            align-items: center;
            gap:  padding: 810px;
           px;
            cursor: pointer;
            border-radius: 5px;
            transition: background 0.2s;
        }
        .progress-panel label:hover { background: #f5f5f5; }
        .progress-panel input[type="checkbox"] {
            width: 18px;
            height: 18px;
            accent-color: #e74c3c;
        }
        .progress-panel input:checked + span {
            text-decoration: line-through;
            color: #888;
        }
        .progress-total {
            margin-top: 15px;
            padding-top: 15px;
            border-top: 2px solid #eee;
            font-weight: bold;
            text-align: center;
            color: #e74c3c;
        }
        
        .header {
            background: linear-gradient(135deg, #c0392b, #e74c3c);
            color: white;
            padding: 30px 20px;
            text-align: center;
        }
        .header h1 { font-size: 2rem; margin-bottom: 10px; }
        .header p { opacity: 0.9; }
        .nav {
            background: #2c3e50;
            padding: 15px 20px;
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        .nav a {
            color: white;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 5px;
            transition: background 0.3s;
            font-size: 0.9rem;
        }
        .nav a:hover { background: #34495e; }
        .nav a.active { background: #e74c3c; }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
        }
        .section {
            background: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .section h2 {
            color: #c0392b;
            border-bottom: 2px solid #e74c3c;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .section h3 {
            color: #e74c3c;
            margin: 25px 0 15px;
            font-size: 1.2rem;
        }
        .section p { margin-bottom: 15px; }
        ul { margin-left: 25px; margin-bottom: 15px; }
        li { margin-bottom: 8px; }
        .tip {
            background: #fef9e7;
            border-left: 4px solid #f1c40f;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 5px 5px 0;
        }
        .warning {
            background: #fdedec;
            border-left: 4px solid #e74c3c;
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 5px 5px 0;
        }
        .code {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-size: 0.9rem;
            margin: 15px 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border: 1px solid #ddd;
        }
        th { background: #e74c3c; color: white; }
        tr:nth-child(even) { background: #f9f9f9; }
        .back-link {
            display: inline-block;
            margin-bottom: 20px;
            color: #c0392b;
            text-decoration: none;
        }
        .back-link:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="header">
        <h1>üóÑÔ∏è Banco de Dados</h1>
        <p>Fundamentos de modelagem, normaliza√ß√£o e arquitetura Oracle</p>
    </div>
    
    <nav class="nav">
        <a href="index.html">Dashboard</a>
        <a href="banco-dados.html" class="active">Banco de Dados</a>
        <a href="sql.html">SQL</a>
        <a href="plsql.html">PL/SQL</a>
        <a href="raciocinio-logico.html">Racioc√≠nio L√≥gico</a>
        <a href="oracle-apex.html">Oracle APEX</a>
    </nav>
    
    <div class="container">
        <a href="index.html" class="back-link">‚Üê Voltar ao Dashboard</a>
        
        <div class="section">
            <h2>1. Modelagem de Dados e DER</h2>
            
            <h3>1.1 Entidades</h3>
            <p>Entidades s√£o objetos do mundo real com exist√™ncia pr√≥pria e distingu√≠vel. Representam conjuntos de informa√ß√µes sobre algo que queremos armazenar.</p>
            <ul>
                <li><strong>Entidade Forte</strong>: Existe independentemente de outras entidades. Ex: CLIENTE, PRODUTO</li>
                <li><strong>Entidade Fraca</strong>: Depende de outra entidade para existir. Ex: DEPENDENTE (depende de FUNCIONARIO)</li>
                <li><strong>Entidade Associativa</strong>: Relaciona duas ou mais entidades. Ex: PEDIDO_PRODUTO</li>
            </ul>
            
            <h3>1.2 Atributos</h3>
            <p>Caracter√≠sticas ou propriedades das entidades.</p>
            <ul>
                <li><strong>Simples</strong>: At√¥mico, indivis√≠vel. Ex: CPF, NOME</li>
                <li><strong>Composto</strong>: Pode ser dividido. Ex: ENDERE√áO (rua, n√∫mero, cidade)</li>
                <li><strong>Multivalorado</strong>: Pode ter m√∫ltiplos valores. Ex: TELEFONE</li>
                <li><strong>Derivado</strong>: Calculado a partir de outros. Ex: IDADE (calculada a partir de DATA_NASC)</li>
            </ul>
            
            <h3>1.3 Relacionamentos</h3>
            <p>Associa√ß√µes entre entidades que expressam como elas se relacionam.</p>
            <ul>
                <li><strong>Cardinalidade</strong>: Quantidade de ocorr√™ncias
                    <ul>
                        <li>1:1 (Um para Um) - Ex: CPF ‚Üî PESSOA</li>
                        <li>1:N (Um para Muitos) - Ex: CLIENTE ‚Üî PEDIDO</li>
                        <li>N:N (Muitos para Muitos) - Ex: ALUNO ‚Üî CURSO</li>
                    </ul>
                </li>
                <li><strong>Participa√ß√£o</strong>:
                    <ul>
                        <li>Total: Toda entidade participa do relacionamento</li>
                        <li>Parcial: Entity pode participar ou n√£o</li>
                    </ul>
                </li>
            </ul>
            
            <div class="tip">
                <strong>Dica:</strong> Em relacionamentos N:N, √© obrigat√≥ria a cria√ß√£o de uma entidade associativa (tabela de liga√ß√£o) no modelo f√≠sico.
            </div>
        </div>
        
        <div class="section">
            <h2>2. Normaliza√ß√£o</h2>
            <p>Processo de organizar dados para minimizar redund√¢ncia e depend√™ncias problem√°ticas.</p>
            
            <h3>2.1 Primeira Forma Normal (1FN)</h3>
            <ul>
                <li>Cada coluna cont√©m valores at√¥micos (indivis√≠veis)</li>
                <li>Cada linha √© √∫nica (tem Primary Key)</li>
                <li>N√£o h√° grupos repetitivos</li>
            </ul>
            <div class="warning">
                <strong>Errado:</strong> TELEFONE VARCHAR2(100) com "1199999, 1188888"<br>
                <strong>Certo:</strong> Criar tabela TELEFONES com coluna TELEFONE
            </div>
            
            <h3>2.2 Segunda Forma Normal (2FN)</h3>
            <ul>
                <li>Est√° na 1FN</li>
                <li>Todos os atributos n√£o-chave dependem completamente da PK</li>
                <li>Aplica-se apenas a tabelas com chave composta</li>
            </ul>
            <div class="warning">
                <strong>Exemplo de viola√ß√£o:</strong><br>
                Tabela PEDIDO_ITEM(pk: id_pedido, id_produto)<br>
                Se tiver "nome_produto", viola 2FN pois nome depende s√≥ de id_produto, n√£o de toda a chave composta.
            </div>
            
            <h3>2.3 Terceira Forma Normal (3FN)</h3>
            <ul>
                <li>Est√° na 2FN</li>
                <li>N√£o h√° depend√™ncias transitivas</li>
                <li>Atributos n√£o-chave n√£o podem depender de outros atributos n√£o-chave</li>
            </ul>
            <div class="warning">
                <strong>Exemplo de viola√ß√£o:</strong><br>
                Tabela CLIENTE com CEP ‚Üí BAIRRO ‚Üí CIDADE<br>
                CEP determina BAIRRO, que determina CIDADE. Cidade depende transitivamente da PK.
            </div>
            
            <h3>2.4 Forma Normal de Boyce-Codd (BCNF)</h3>
            <p>Extens√£o da 3FN. Para toda depend√™ncia funcional X ‚Üí Y, X deve ser uma superchave.</p>
        </div>
        
        <div class="section">
            <h2>3. Tipos de Dados Oracle</h2>
            
            <h3>3.1 Tipos de Caractere</h3>
            <table>
                <tr>
                    <th>Tipo</th>
                    <th>Descri√ß√£o</th>
                    <th>Tamanho</th>
                </tr>
                <tr>
                    <td>VARCHAR2(n)</td>
                    <td>String de tamanho vari√°vel</td>
                    <td>1-4000 bytes</td>
                </tr>
                <tr>
                    <td>CHAR(n)</td>
                    <td>String de tamanho fixo</td>
                    <td>1-2000 bytes</td>
                </tr>
                <tr>
                    <td>CLOB</td>
                    <td>Character Large Object</td>
                    <td>at√© 128TB</td>
                </tr>
                <tr>
                    <td>NCHAR(n)</td>
                    <td>String Unicode fixa</td>
                    <td>1-2000 chars</td>
                </tr>
                <tr>
                    <td>NVARCHAR2(n)</td>
                    <td>String Unicode vari√°vel</td>
                    <td>1-4000 chars</td>
                </tr>
            </table>
            
            <h3>3.2 Tipos Num√©ricos</h3>
            <table>
                <tr>
                    <th>Tipo</th>
                    <th>Descri√ß√£o</th>
                    <th>Exemplo</th>
                </tr>
                <tr>
                    <td>NUMBER(p,s)</td>
                    <td>N√∫mero com precis√£o e escala</td>
                    <td>NUMBER(10,2) ‚Üí 12345678.90</td>
                </tr>
                <tr>
                    <td>FLOAT</td>
                    <td>N√∫mero de ponto flutuante</td>
                    <td>FLOAT(63)</td>
                </tr>
                <tr>
                    <td>BINARY_FLOAT</td>
                    <td>32-bit float</td>
                    <td>Precis√£o ~7 d√≠gitos</td>
                </tr>
                <tr>
                    <td>BINARY_DOUBLE</td>
                    <td>64-bit float</td>
                    <td>Precis√£o ~15 d√≠gitos</td>
                </tr>
            </table>
            
            <h3>3.3 Tipos de Data</h3>
            <table>
                <tr>
                    <th>Tipo</th>
                    <th>Descri√ß√£o</th>
                    <th>Precis√£o</td>
                </tr>
                <tr>
                    <td>DATE</td>
                    <td>Data e hora</td>
                    <td>1 segundo</td>
                </tr>
                <tr>
                    <td>TIMESTAMP</td>
                    <td>Data com fra√ß√£o de segundos</td>
                    <td>at√© 9 d√≠gitos</td>
                </tr>
                <tr>
                    <td>TIMESTAMP WITH TIME ZONE</td>
                    <td>Timestamp com fuso hor√°rio</td>
                    <td>timezone incluso</td>
                </tr>
                <tr>
                    <td>TIMESTAMP WITH LOCAL TIME ZONE</td>
                    <td>Timestamp convertendo para fuso da sess√£o</td>
                    <td>timezone da sess√£o</td>
                </tr>
            </table>
            
            <h3>3.4 Tipos Bin√°rios</h3>
            <table>
                <tr>
                    <th>Tipo</th>
                    <th>Descri√ß√£o</th>
                    <th>Tamanho</th>
                </tr>
                <tr>
                    <td>BLOB</td>
                    <td>Binary Large Object</td>
                    <td>at√© 128TB</td>
                </tr>
                <tr>
                    <td>BFILE</td>
                    <td>Pointer para arquivo externo</td>
                    <td>at√© 4GB</td>
                </tr>
                <tr>
                    <td>RAW(n)</td>
                    <td>Dados bin√°rios de tamanho fixo</td>
                    <td>1-2000 bytes</td>
                </tr>
                <tr>
                    <td>ROWID</td>
                    <td>Endere√ßo √∫nico da linha</td>
                    <td>10 bytes</td>
                </tr>
            </table>
        </div>
        
        <div class="section">
            <h2>4. √çndices e Chaves</h2>
            
            <h3>4.1 Tipos de Chaves</h3>
            <ul>
                <li><strong>Primary Key (PK)</strong>: Identifica exclusivamente cada linha. N√£o permite NULL nem duplicados. Cria √≠ndice automaticamente.</li>
                <li><strong>Foreign Key (FK)</strong>: Referencia Primary Key de outra tabela. Mant√©m integridade referencial.</li>
                <li><strong>Unique Key (UK)</strong>: N√£o permite duplicados. Permite m√∫ltiplos NULLs (em Oracle). Cria √≠ndice automaticamente.</li>
            </ul>
            
            <h3>4.2 Constraints</h3>
            <table>
                <tr>
                    <th>Constraint</th>
                    <th>Descri√ß√£o</th>
                </tr>
                <tr>
                    <td>NOT NULL</td>
                    <td>Coluna obrigat√≥ria</td>
                </tr>
                <tr>
                    <td>UNIQUE</td>
                    <td>Valores n√£o podem se repetir</td>
                </tr>
                <tr>
                    <td>PRIMARY KEY</td>
                    <td>Chave prim√°ria (√∫nica + n√£o nulo)</td>
                </tr>
                <tr>
                    <td>FOREIGN KEY</td>
                    <td>Refer√™ncia a outra tabela</td>
                </tr>
                <tr>
                    <td>CHECK</td>
                    <td>Condi√ß√£o l√≥gica deve ser satisfeita</td>
                </tr>
                <tr>
                    <td>DEFAULT</td>
                    <td>Valor padr√£o se n√£o especificado</td>
                </tr>
            </table>
            
            <h3>4.3 Tipos de √çndices</h3>
            <ul>
                <li><strong>B-tree (B*Tree)</strong>: Padr√£o, eficiente para alta cardinalidade. Estrutura hier√°rquica balanceada.</li>
                <li><strong>Bitmap</strong>: Ideal para baixa cardinalidade (sexo, estado civil). Armazena bits para cada valor.</li>
                <li><strong>Function-based</strong>: Indexa resultado de fun√ß√µes/express√µes.</li>
                <li><strong>Composite</strong>: Indexa m√∫ltiplas colunas.</li>
                <li><strong>Unique</strong>: Garante valores √∫nicos no √≠ndice.</li>
            </ul>
            
            <div class="code">
-- Exemplos de cria√ß√£o de √≠ndices
CREATE INDEX idx_nome ON funcionarios(nome);
CREATE BITMAP INDEX idx_sexo ON clientes(sexo);
CREATE INDEX idx_upper ON funcionarios(UPPER(nome));
CREATE UNIQUE INDEX idx_cpf ON pessoas(cpf);</div>
        </div>
        
        <div class="section">
            <h2>5. Controle de Transa√ß√µes</h2>
            
            <h3>5.1 Comandos TCL</h3>
            <ul>
                <li><strong>COMMIT</strong>: Persiste todas as altera√ß√µes da transa√ß√£o atual</li>
                <li><strong>ROLLBACK</strong>: Desfaz todas as altera√ß√µes da transa√ß√£o atual</li>
                <li><strong>SAVEPOINT nome</strong>: Cria ponto de salvamento parcial</li>
            </ul>
            
            <div class="code">
-- Exemplo de transa√ß√£o
INSERT INTO contas (id, saldo) VALUES (1, 1000);
SAVEPOINT s1;
UPDATE contas SET saldo = saldo - 100 WHERE id = 1;
SAVEPOINT s2;
ROLLBACK TO s1;  -- Volta ao estado ap√≥s primeiro insert
COMMIT;</div>
            
            <h3>5.2 Propriedades ACID</h3>
            <ul>
                <li><strong>Atomicidade</strong>: Transa√ß√£o √© at√¥mica (tudo ou nada)</li>
                <li><strong>Consist√™ncia</strong>: Transa√ß√£o leva de um estado consistente a outro</li>
                <li><strong>Isolamento</strong>: Transa√ß√µes concorrentes n√£o interferem entre si</li>
                <li><strong>Durabilidade</strong>: Commit persiste mesmo em caso de falha</li>
            </ul>
            
            <h3>5.3 N√≠veis de Isolamento</h3>
            <table>
                <tr>
                    <th>N√≠vel</th>
                    <th>Dirty Read</th>
                    <th>Non-Repeatable</th>
                    <th>Phantom</th>
                </tr>
                <tr>
                    <td>READ UNCOMMITTED</td>
                    <td>Poss√≠vel</td>
                    <td>Poss√≠vel</td>
                    <td>Poss√≠vel</td>
                </tr>
                <tr>
                    <td>READ COMMITTED</td>
                    <td>N√£o</td>
                    <td>Poss√≠vel</td>
                    <td>Poss√≠vel</td>
                </tr>
                <tr>
                    <td>REPEATABLE READ</td>
                    <td>N√£o</td>
                    <td>N√£o</td>
                    <td>Poss√≠vel</td>
                </tr>
                <tr>
                    <td>SERIALIZABLE</td>
                    <td>N√£o</td>
                    <td>N√£o</td>
                    <td>N√£o</td>
                </tr>
            </table>
        </div>
        
        <div class="section">
            <h2>6. Tablespaces e Segmentos</h2>
            
            <h3>6.1 Estrutura L√≥gica</h3>
            <ul>
                <li><strong>Tablespace</strong>: Unidade l√≥gica de armazenamento. Cont√©m um ou mais datafiles.</li>
                <li><strong>Segment</strong>: Conjunto de extents alocados para um objeto (tabela, √≠ndice).</li>
                <li><strong>Extent</strong>: Conjunto de data blocks cont√≠guos.</li>
                <li><strong>Data Block</strong>: Menor unidade de E/S (geralmente 8KB).</li>
            </ul>
            
            <h3>6.2 Oracle Data Dictionary</h3>
            <p>Conjunto de tabelas e vis√µes de somente leitura que armazenam metadados do banco.</p>
            <div class="code">
-- Consultas √∫teis no Data Dictionary
SELECT * FROM user_tables;
SELECT * FROM user_indexes;
SELECT * FROM user_constraints;
SELECT * FROM user_tab_columns WHERE table_name = 'FUNCIONARIOS';
SELECT * FROM user_cons_columns WHERE constraint_name = 'PK_FUNC';</div>
        </div>
        
        <div class="section">
            <h2>7. Controle de Concorr√™ncia e Locking</h2>
            
            <h3>7.1 Tipos de Lock</h3>
            <ul>
                <li><strong>DML Lock</strong>: Protege dados (linhas). Ex: LOCK DE LINHA.</li>
                <li><strong>DDL Lock</strong>: Protege estruturas. Ex: LOCK DE TABELA.</li>
                <li><strong>Internal Lock</strong>: Protege recursos internos.</li>
            </ul>
            
            <h3>7.2 Modos de Lock</h3>
            <ul>
                <li><strong>Row Share (SS)</strong>: Linha compartilhada para atualiza√ß√£o</li>
                <li><strong>Row Exclusive (SX)</strong>: Linha exclusiva (INSERT, UPDATE, DELETE)</li>
                <li><strong>Share (S)</strong>: Compartilhado para queries</li>
                <li><strong>Share Row Exclusive (SSX)</strong>: Compartilhado mas exclusivo para linhas</li>
                <li><strong>Exclusive (X)</strong>: TOTALMENTE EXCLUSIVO</li>
            </ul>
            
            <div class="tip">
                <strong>Deadlock</strong>: Ocorre quando duas ou mais sess√µes esperam lock uma da outra. Oracle detecta e resolve automaticamente desfazendo uma transa√ß√£o.
            </div>
        </div>
    </div>
    
    <!-- Painel de Progresso -->
    <div class="progress-toggle">
        <div class="progress-panel" id="progressPanel">
            <h4>Meu Progresso</h4>
            <label><input type="checkbox"> <span>Modelagem e DER</span></label>
            <label><input type="checkbox"> <span>Normaliza√ß√£o (1FN, 2FN, 3FN)</span></label>
            <label><input type="checkbox"> <span>Tipos de Dados Oracle</span></label>
            <label><input type="checkbox"> <span>√çndices e Chaves</span></label>
            <label><input type="checkbox"> <span>Controle de Transa√ß√µes</span></label>
            <label><input type="checkbox"> <span>Tablespaces e Segmentos</span></label>
            <label><input type="checkbox"> <span>Concorr√™ncia e Locking</span></label>
            <div class="progress-total">0/7 (0%)</div>
        </div>
        <button class="progress-btn" onclick="toggleProgress()">
            <span>üìä</span> Progresso
        </button>
    </div>
    <script>
        function toggleProgress() {
            document.getElementById('progressPanel').classList.toggle('open');
        }
        document.querySelectorAll('.progress-panel input').forEach(cb => {
            cb.addEventListener('change', function() {
                const total = document.querySelectorAll('.progress-panel input').length;
                const checked = document.querySelectorAll('.progress-panel input:checked').length;
                document.querySelector('.progress-total').textContent = checked + '/' + total + ' (' + Math.round(checked/total*100) + '%)';
            });
        });
    </script>
</body>
</html>
